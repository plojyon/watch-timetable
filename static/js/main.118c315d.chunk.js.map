{"version":3,"sources":["components/Event.jsx","components/WatchTimetable.jsx","App.js","reportWebVitals.js","index.js"],"names":["shadeColor","color","percent","R","parseInt","substring","G","B","toString","length","Event","props","state","start","end","text","fontSize","textColor","outline","size","outerMargin","padding","backgound","background","dim","id","Math","floor","random","hourToAngle","bind","hour","angle","PI","this","radius","center","watchSize","outer","inner","r","angleOffset","atan","edges","forEach","startend","outincenter","x","round","cos","y","sin","abs","svgString","viewBox","style","position","top","left","width","height","stroke","fill","d","xlinkHref","textAnchor","startOffset","Component","days","layerStart","layer","textRadius","eventWidth","WatchTimetable","timetable","day","colorScheme","currentTime","Date","status","interval","getEvents","getNextEvent","refresh","interval_id","setInterval","setState","clearInterval","today","getDay","timeRotation","getHours","getMinutes","upcoming","type","abbr","eta","str","events","i","begin","predmet","time","ura","dan","trajanje","push","current","event","eventTime","getTime","setHours","setMinutes","diff","ms","min","slice","sort","a","b","undefined","backgroundColor","borderRadius","map","lecture","transform","transformOrigin","src","alt","logoSize","background2","hand","red","orange","yellow","green","blue","purple","App","api_url","error","fetchTableData","fetch","method","headers","response","ok","json","data","console","log","statusText","className","refreshTimetable","textAlign","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"gSAYA,SAASA,EAAWC,EAAOC,GAC1B,IAAIC,EAAIC,SAASH,EAAMI,UAAU,EAAE,GAAG,IAClCC,EAAIF,SAASH,EAAMI,UAAU,EAAE,GAAG,IAClCE,EAAIH,SAASH,EAAMI,UAAU,EAAE,GAAG,IAUtC,OATAF,EAAIC,SAASD,GAAK,IAAMD,GAAW,KAInCI,GAHAA,EAAIF,SAASE,GAAK,IAAMJ,GAAW,MAG5B,IAAKI,EAAE,IACdC,GAHAA,EAAIH,SAASG,GAAK,IAAML,GAAW,MAG5B,IAAKK,EAAE,IAIP,KAH4B,KAHnCJ,EAAKA,EAAE,IAAKA,EAAE,KAGDK,SAAS,IAAIC,OAAY,IAAIN,EAAEK,SAAS,IAAIL,EAAEK,SAAS,MACjC,IAAxBF,EAAEE,SAAS,IAAIC,OAAY,IAAIH,EAAEE,SAAS,IAAIF,EAAEE,SAAS,MACjC,IAAxBD,EAAEC,SAAS,IAAIC,OAAY,IAAIF,EAAEC,SAAS,IAAID,EAAEC,SAAS,K,IAqGtDE,E,kDAhGd,WAAYC,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZC,MAAO,EAAKF,MAAME,MAClBC,IAAK,EAAKH,MAAMG,IAChBC,KAAM,EAAKJ,MAAMI,KACjBC,SAAU,EAAKL,MAAMK,SACrBf,MAAO,EAAKU,MAAMV,MAClBgB,UAAW,EAAKN,MAAMM,UACtBC,QAAS,EAAKP,MAAMO,SAAW,GAC/BC,KAAM,EAAKR,MAAMQ,KACjBC,YAAa,EAAKT,MAAMS,YACxBC,QAAS,EAAKV,MAAMU,QACpBC,UAAW,EAAKX,MAAMY,WACtBC,IAAK,EAAKb,MAAMa,IAChBC,GAAI,EAAKd,MAAMc,IAAMC,KAAKC,MAAsB,IAAhBD,KAAKE,WAGtC,EAAKC,YAAc,EAAKA,YAAYC,KAAjB,gBAlBD,E,+CAqBnB,SAAYC,GACX,IAAIC,EAASD,EAAO,IAAO,EAAEL,KAAKO,GAAG,IAErC,OADAD,GAASN,KAAKO,GAAG,I,oBAIlB,WAEC,IAAID,EAAQ,CACXnB,MAAOqB,KAAKL,YAAYK,KAAKtB,MAAMC,OACnCC,IAAKoB,KAAKL,YAAYK,KAAKtB,MAAME,MAI9BqB,EAAS,GACbA,EAAOC,OAASC,IAAcH,KAAKtB,MAAMQ,YAAcc,KAAKtB,MAAMS,QAAUa,KAAKtB,MAAMO,KAAK,EAC5FgB,EAAOG,MAAQH,EAAOC,OAASF,KAAKtB,MAAMO,KAAK,EAC/CgB,EAAOI,MAAQJ,EAAOC,OAASF,KAAKtB,MAAMO,KAAK,EAE/C,IAAIqB,EAAIH,IAAcH,KAAKtB,MAAMQ,YAAcc,KAAKtB,MAAMO,KAAK,EAC3DsB,EAAcf,KAAKgB,KAAMR,KAAKtB,MAAMO,KAAK,EAAKqB,GAClDR,EAAMnB,OAAS4B,EACfT,EAAMlB,KAAO2B,EAEb,IAAIE,EAAQ,GACZ,CAAC,QAAS,OAAOC,SAAQ,SAACC,GACzBF,EAAME,GAAY,GAClB,CAAC,QAAS,QAAS,UAAUD,SAAQ,SAACE,GACrCH,EAAME,GAAUC,GAAe,GAC/BH,EAAME,GAAUC,GAAaC,EAAIrB,KAAKsB,MAAMtB,KAAKuB,IAAIjB,EAAMa,IAAaV,EAAOW,GAAeT,KAC9FM,EAAME,GAAUC,GAAaI,EAAIxB,KAAKsB,MAAMtB,KAAKyB,IAAInB,EAAMa,IAAaV,EAAOW,GAAeT,WAIhG,IACIlB,EADUO,KAAK0B,IAAIlB,KAAKtB,MAAMC,MAAQqB,KAAKtB,MAAME,KAAO,EACxC,IAAM,IAEtBuC,EAEH,MAAMV,EAAM9B,MAAMyB,MAAMS,EAAE,IAAIJ,EAAM9B,MAAMyB,MAAMY,EAEhD,MAAOhB,KAAKtB,MAAMO,KAAK,EAAG,IAAKe,KAAKtB,MAAMO,KAAK,EAAG,UAAUwB,EAAM9B,MAAM0B,MAAMQ,EAAE,IAAIJ,EAAM9B,MAAM0B,MAAMW,EAEtG,MAAMf,EAAOI,MAAM,IAAIJ,EAAOI,MAAM,MAAMpB,EAAK,MAAMwB,EAAM7B,IAAIyB,MAAMQ,EAAE,IAAIJ,EAAM7B,IAAIyB,MAAMW,EAE3F,MAAOhB,KAAKtB,MAAMO,KAAK,EAAG,IAAKe,KAAKtB,MAAMO,KAAK,EAAG,UAAUwB,EAAM7B,IAAIwB,MAAMS,EAAE,IAAIJ,EAAM7B,IAAIwB,MAAMY,EAElG,MAAMf,EAAOG,MAAM,IAAIH,EAAOG,MAAM,MAAMnB,EAAK,MAAMwB,EAAM9B,MAAMyB,MAAMS,EAAE,IAAIJ,EAAM9B,MAAMyB,MAAMY,EAIhG,OACC,sBAAKI,QAAS,cAAgCC,MAAO,CACpDC,SAAU,WACVC,IAAI,IACJC,KAAM,IACNC,MAAOtB,QACPuB,OAAQvB,SALT,UAOC,sBACCZ,GAAI,SAASS,KAAKtB,MAAMa,GACxBoC,OAAQ3B,KAAKtB,MAAMM,QACnB4C,KAAM5B,KAAKtB,MAAMY,IAAKxB,EAAWkC,KAAKtB,MAAMX,OAAQ,IAAMiC,KAAKtB,MAAMX,MACrE8D,EAAGV,IAEJ,sBAAMH,IAAOhB,KAAKtB,MAAMO,KAAOe,KAAKtB,MAAMI,UAAU,EAAG,GAAKA,SAA+B,IAApBkB,KAAKtB,MAAMI,SAAgB,KAAMuC,MAAO,CAACO,KAAM5B,KAAKtB,MAAMK,WAAjI,SACC,0BAAU+C,UAAW,UAAU9B,KAAKtB,MAAMa,GAAIwC,WAAW,SAASC,YAAY,MAA9E,SACEhC,KAAKtB,MAAMG,gB,GAzFEoD,aCzBd9B,EAAY,IACZ+B,EAAO,CAAC,SAAU,UAAW,YAAa,WAAY,SAAU,WAAY,UAQ5EC,EAAa,SAACC,GAAD,OAAW,GAAsBA,EAH9B,GAKhBtD,EAAiB,GAAjBA,EAA6B,GAG7BuD,EACGlC,IAAcgC,EAAW,IAAMG,GAAsC,IAAhBxD,GADxDuD,EAEAlC,IAAcgC,EAAW,GAAkB,IAAbrD,EAAiB,EAAG,EA6NzCyD,E,kDAvNd,WAAY9D,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZ8D,UAAW,EAAK/D,MAAM+D,UACtBnD,WAAY,EAAKZ,MAAMY,WACvBoD,IAAK,EAAKhE,MAAMgE,IAChBC,YAAa,EAAKjE,MAAMiE,YAExBC,YAAa,IAAIC,KACjBC,OAAQ,QAERC,SAAU,GAGX,EAAKC,UAAY,EAAKA,UAAUnD,KAAf,gBACjB,EAAKoD,aAAe,EAAKA,aAAapD,KAAlB,gBACpB,EAAKqD,QAAU,EAAKA,QAAQrD,KAAb,gBAhBG,E,qDAmBnB,WACC,IAAIsD,EAAcC,YAAYnD,KAAKiD,QAvBb,KAwBtBjD,KAAKoD,SAAS,CAACN,SAAUI,IACzBlD,KAAKiD,Y,kCAEN,WACCI,cAAcrD,KAAKtB,MAAMoE,Y,qBAG1B,WACC,IAAIH,EAAc,IAAIC,KAElBU,GAASX,EAAYY,SAAW,GAAK,EACrCC,EAAe,GAAAb,EAAYc,WAA8B,GAC7DD,GAAgB,GAAAb,EAAYe,aAE5B,IAAIb,EAAS,GACTc,EAAW3D,KAAKgD,aAAaL,GACX,SAAlBgB,EAASC,OAAiBf,EAAS,kBACjB,UAAlBc,EAASC,OAAkBf,EAASc,EAASE,KAAO,OAAOF,EAASG,IAAIC,KACtD,QAAlBJ,EAASC,OAAgBf,EAASc,EAASG,IAAIC,IAAI,OAAOJ,EAASE,KAAK,SAE5E7D,KAAKoD,SAAS,CAAET,YAAaA,EAAaW,MAAOA,EAAOE,aAAcA,EAAcX,OAAQA,M,uBAG7F,WACC,IAAImB,EAAS,GACb,IAAK,IAAIC,KAAKjE,KAAKtB,MAAM8D,UAAW,CACnC,IAAI0B,EAAQ,CACXL,KAAM7D,KAAKtB,MAAM8D,UAAUyB,GAAGE,QAAQN,KACtCO,KAAMpE,KAAKtB,MAAM8D,UAAUyB,GAAGI,IAC9B5B,IAAKzC,KAAKtB,MAAM8D,UAAUyB,GAAGK,IAC7BV,KAAM,SAEHhF,EAAM,CACTiF,KAAM7D,KAAKtB,MAAM8D,UAAUyB,GAAGE,QAAQN,KACtCO,KAAMpE,KAAKtB,MAAM8D,UAAUyB,GAAGI,IAAMrE,KAAKtB,MAAM8D,UAAUyB,GAAGM,SAC5D9B,IAAKzC,KAAKtB,MAAM8D,UAAUyB,GAAGK,IAC7BV,KAAM,OAEPI,EAAOQ,KAAKN,GACZF,EAAOQ,KAAK5F,GAEb,OAAOoF,I,0BAGR,SAAaS,GACZ,IAAId,EAAW,GA8Bf,OA7Ba3D,KAAK+C,YACXrC,SAAQ,SAACgE,EAAOT,GACtB,GAAIS,EAAMjC,OAAUgC,EAAQlB,SAAW,GAAK,EAAI,CAC/C,IAAIoB,EAAY,IAAI/B,KAAK6B,EAAQG,WACjCD,EAAUE,SAASH,EAAMN,MACzBO,EAAUG,WAAW,GAGrB,IAAIC,EAAOJ,EAAUC,UAAYH,EAAQG,UACzC,GAAIG,EAAO,EAAG,CACbL,EAAMZ,IAAM,GACZY,EAAMZ,IAAIkB,GAAKD,EACfL,EAAMZ,IAAIC,IAAM,GAChB,IAAIkB,EAAMzF,KAAKC,MAAOsF,EAAK,IAAM,IAC7BlF,EAAOL,KAAKC,MAAMwF,EAAI,IAC1BA,GAAO,GACM,IAATpF,IACH6E,EAAMZ,IAAIC,KAAOlE,EAAK,OACX,IAARoF,IACHP,EAAMZ,IAAIC,KAAOkB,EAAM,SACX,IAATpF,GAAsB,IAARoF,IACjBP,EAAMZ,IAAIC,IAAM,KAEjBW,EAAMZ,IAAIC,IAAImB,MAAM,GAAI,GACxBvB,EAASa,KAAKE,QAKO,IAApBf,EAASpF,OAAqB,CAACqF,KAAM,SAEzCD,EAASwB,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAEtB,IAAIkB,GAAKK,EAAEvB,IAAIkB,MAClCrB,EAAS,M,oBAGjB,WAAU,IAAD,OAER,YAAyB2B,IAArBtF,KAAKtB,MAAM4E,MAA4B,2CAI1C,cADA,CACA,OAAKjC,MAAO,CACXkE,gBAAiBvF,KAAKtB,MAAMgE,YAAX,WAEjB8C,aAAc,MAEd/D,MAAOtB,QACPuB,OAAQvB,SANT,UAUE,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAIsF,KAAI,SAAChD,GACvC,OAAO,qBAAepB,MAAO,CAC5BkE,gBAAkB9C,EAAM,EACvB,EAAK/D,MAAMgE,YAAX,WACA,EAAKhE,MAAMgE,YAAX,YACD8C,aAAc,MACd/D,MAAQtB,EAAY,EAAEgC,EAAWM,GAAM,KACvCf,OAASvB,EAAY,EAAEgC,EAAWM,GAAM,KACxCnB,SAAU,QACVC,IAAMY,EAAWM,GAAQ,KACzBjB,KAAOW,EAAWM,GAAQ,OATVA,MAelBzC,KAAKtB,MAAM8D,UAAUiD,KAAI,SAACC,EAASzB,GAClC,OAAO,cAAC,EAAD,CAEN1E,GAAI0E,EACJtF,MAAO+G,EAAQrB,IACfzF,IAAK8G,EAAQrB,IAAMqB,EAAQnB,SAC3BxG,MAAO,EAAKW,MAAMgE,YAAYgD,EAAQvB,QAAQpG,OAC9CgB,UAAW,EAAKL,MAAMgE,YAAX,WACX7D,KAAM6G,EAAQvB,QAAQN,KACtB/E,SAAWwD,GACXrD,KAlKY,GAmKZC,YAAciD,EAAWuD,EAAQpB,KACjCnF,QAnKQ,EAoKRE,WACCqG,EAAQpB,IAAM,EACd,EAAK5F,MAAMgE,YAAX,WACA,EAAKhE,MAAMgE,YAAX,YAEDpD,IAAMoG,EAAQpB,MAAQ,EAAK5F,MAAM4E,OAhB5BW,MAsBR,qBAAK5C,MAAO,CACXC,SAAU,WACVC,IAAMpB,QACNqB,KAAOrB,QACPsB,MAAQtB,QACRuB,OAAQ,MACRiE,UAAW,UAAW3F,KAAKtB,MAAM8E,aAAc,OAC/CoC,gBAAiB,MACjBL,gBAAiBvF,KAAKtB,MAAMgE,YAAX,QAIlB,qBAAKmD,IAAI,cAAcC,IAAI,OAAOzE,MAAO,CACxCC,SAAU,WACVC,IAAMpB,QACNqB,KAAOrB,QACPsB,MAAOsE,OACPrE,OAAQqE,UAIT,sBAAK3E,QAAS,cAAgCC,MAAO,CACpDC,SAAU,WACVC,IAAI,IACJC,KAAM,IACNC,MAAOtB,QACPuB,OAAQvB,SALT,UAQC,sBAAMZ,GAAG,eAAeqC,KAAK,OAAOC,EACnC,iBACSQ,EADT,SAEQA,EAAmB,IAAKA,EAAmB,UAA6B,EAAlBA,EAAqB,OAEpF,sBAAMrB,EAAE,IAAIlC,SAA2B,IAAhBA,EAAuB,KAAMuC,MAAO,CAACO,KAAM5B,KAAKtB,MAAMgE,YAAX,MAAlE,SACC,0BAAUZ,UAAW,gBAAiBC,WAAW,SAASC,YAAY,MAAtE,SACChC,KAAKtB,MAAMmE,WAKb,sBAAMtD,GAAG,YAAYqC,KAAK,OAAOC,EAChC,iBACSQ,EADT,SAEQA,EAAgB,IAAKA,EAAgB,UAA0B,EAAfA,EAAkB,OAE3E,sBAAMrB,EAAE,IAAIlC,SAAwB,IAAbA,EAAoB,KAAMuC,MAAO,CAACO,KAAM5B,KAAKtB,MAAMgE,YAAX,MAA/D,SACC,0BAAUZ,UAAW,aAAcC,WAAW,SAASC,YAAY,MAAnE,SACEE,EAAKlC,KAAKtB,MAAM4E,qB,GA/MKrB,aCpBvBS,EAAc,CACnBrD,WAAY,UACZ2G,YAAa,UACbC,KAAM,MACNpH,KAAM,QAENqH,IAAK,UACLC,OAAQ,UACRC,OAAQ,UACRC,MAAO,UACPC,KAAM,UACNC,OAAQ,WAwDMC,E,kDApDd,WAAY/H,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZ8D,WAAW,EACXiE,QAAShI,EAAMgI,SAAW,2BAC1BC,OAAO,GAGR,EAAKC,eAAiB,EAAKA,eAAe/G,KAApB,gBARJ,E,qDAWnB,WAECI,KAAK2G,mB,mEAGN,8BAAAvB,EAAA,sEACsBwB,MACpB5G,KAAKtB,MAAM+H,QACX,CACCI,OAAQ,MACRC,QAAS,CACR,eAAgB,sBANpB,YACKC,EADL,QAacC,GAbd,iCAcmBD,EAASE,OAd5B,OAcMC,EAdN,OAgBEC,QAAQC,IAAIF,GACZlH,KAAKoD,SAAS,CAACZ,UAAW0E,IAjB5B,+BAmBEC,QAAQT,MAAMK,GACd/G,KAAKoD,SAAU,CAAEsD,MAAO,6BAA+BK,EAASlE,OAAS,KAAOkE,EAASM,aApB3F,kBAqBS,GArBT,iD,0EA0BA,WACC,OAAKrH,KAAKtB,MAAM8D,UAEf,qBAAK8E,UAAU,MAAf,SACC,cAAC,EAAD,CAAgB9E,UAAWxC,KAAKtB,MAAM8D,UAAWE,YAAaA,EAAa6E,iBAAkBvH,KAAK2G,mBAHlE,mBAAGtF,MAAO,CAACmG,UAAW,UAAtB,yB,GA5ClBvF,aCNHwF,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.118c315d.chunk.js","sourcesContent":["import React, { Component } from \"react\";\n\nconst watchSize = 360;\n\n// A function to blend colours\n// this was needed because my watch had trouble rendering the css property filer: brightness(50%)\n// so I modified the hex value of the colour myself.\n// This function comes from https://stackoverflow.com/a/13532993\n// Thanks Pablo, et al.\n// Yeah I'd use the one from the top answer, it looks really sick,\n// but React doesn't like it, so I had to use this.\n// It works alright I guess ...\nfunction shadeColor(color, percent) {\n\tvar R = parseInt(color.substring(1,3),16);\n\tvar G = parseInt(color.substring(3,5),16);\n\tvar B = parseInt(color.substring(5,7),16);\n\tR = parseInt(R * (100 + percent) / 100);\n\tG = parseInt(G * (100 + percent) / 100);\n\tB = parseInt(B * (100 + percent) / 100);\n\tR = (R<255)?R:255;\n\tG = (G<255)?G:255;\n\tB = (B<255)?B:255;\n\tvar RR = ((R.toString(16).length===1)?\"0\"+R.toString(16):R.toString(16));\n\tvar GG = ((G.toString(16).length===1)?\"0\"+G.toString(16):G.toString(16));\n\tvar BB = ((B.toString(16).length===1)?\"0\"+B.toString(16):B.toString(16));\n\treturn \"#\"+RR+GG+BB;\n}\n\nclass Event extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tstart: this.props.start,\n\t\t\tend: this.props.end,\n\t\t\ttext: this.props.text,\n\t\t\tfontSize: this.props.fontSize,\n\t\t\tcolor: this.props.color,\n\t\t\ttextColor: this.props.textColor,\n\t\t\toutline: this.props.outline || \"\",\n\t\t\tsize: this.props.size,\n\t\t\touterMargin: this.props.outerMargin,\n\t\t\tpadding: this.props.padding,\n\t\t\tbackgound: this.props.background,\n\t\t\tdim: this.props.dim,\n\t\t\tid: this.props.id || Math.floor(Math.random() * 100000)\n\t\t}\n\n\t\tthis.hourToAngle = this.hourToAngle.bind(this);\n\t}\n\n\thourToAngle(hour) {\n\t\tlet angle = (hour % 12) * (2*Math.PI/12)\n\t\tangle -= Math.PI/2 // hour 0 is upward (angle 0), not forward\n\t\treturn angle;\n\t}\n\n\trender() {\n\t\t// angle at which the start/end hour is\n\t\tlet angle = {\n\t\t\tstart: this.hourToAngle(this.state.start),\n\t\t\tend: this.hourToAngle(this.state.end)\n\t\t}\n\n\t\t// distance from screen center to outer/center/inner of the curve\n\t\tlet radius = {};\n\t\tradius.center = watchSize/2 - this.state.outerMargin - this.state.padding - this.state.size/2;\n\t\tradius.outer = radius.center + this.state.size/2;\n\t\tradius.inner = radius.center - this.state.size/2;\n\n\t\tlet r = watchSize/2 - this.state.outerMargin - this.state.size/2;\n\t\tlet angleOffset = Math.atan((this.state.size/2) / r);\n\t\tangle.start += angleOffset;\n\t\tangle.end -= angleOffset;\n\n\t\tlet edges = {};\n\t\t[\"start\", \"end\"].forEach((startend) => {\n\t\t\tedges[startend] = {};\n\t\t\t[\"outer\", \"inner\", \"center\"].forEach((outincenter) => {\n\t\t\t\tedges[startend][outincenter] = {}\n\t\t\t\tedges[startend][outincenter].x = Math.round(Math.cos(angle[startend]) * radius[outincenter] + watchSize/2);\n\t\t\t\tedges[startend][outincenter].y = Math.round(Math.sin(angle[startend]) * radius[outincenter] + watchSize/2);\n\t\t\t})\n\t\t})\n\n\t\tlet isLarge = Math.abs(this.state.start - this.state.end) > 6\n\t\tlet size = isLarge? \"1\" : \"0\";\n\n\t\tlet svgString =\n\t\t\t// move to starting position (outer start)\n\t\t\t\" M \"+edges.start.outer.x+\" \"+edges.start.outer.y+\n\t\t\t// draw arc around start egde\n\t\t\t\" A \"+(this.state.size/2)+\" \"+(this.state.size/2)+\" 0 0 0 \"+edges.start.inner.x+\" \"+edges.start.inner.y+\n\t\t\t// draw inner arc\n\t\t\t\" A \"+radius.inner+\" \"+radius.inner+\" 0 \"+size+\" 1 \"+edges.end.inner.x+\" \"+edges.end.inner.y+\n\t\t\t// draw arc around end edge\n\t\t\t\" A \"+(this.state.size/2)+\" \"+(this.state.size/2)+\" 0 0 0 \"+edges.end.outer.x+\" \"+edges.end.outer.y+\n\t\t\t// draw outer arc\n\t\t\t\" A \"+radius.outer+\" \"+radius.outer+\" 0 \"+size+\" 0 \"+edges.start.outer.x+\" \"+edges.start.outer.y\n\t\t// A rx, ry, angle, large/small arc, sweep, dx, dy\n\n\n\t\treturn (\n\t\t\t<svg viewBox={\"0 0 \"+watchSize+\" \"+watchSize} style={{\n\t\t\t\tposition: \"absolute\",\n\t\t\t\ttop:\"0\",\n\t\t\t\tleft: \"0\",\n\t\t\t\twidth: watchSize+'px',\n\t\t\t\theight: watchSize+'px'\n\t\t\t}}>\n\t\t\t\t<path\n\t\t\t\t\tid={\"curve_\"+this.state.id}\n\t\t\t\t\tstroke={this.state.outline}\n\t\t\t\t\tfill={this.state.dim? shadeColor(this.state.color, -50) : this.state.color}\n\t\t\t\t\td={svgString}\n\t\t\t\t/>\n\t\t\t\t<text y={ (-(this.state.size - this.state.fontSize)/2)+\"\" } fontSize={(this.state.fontSize*1.4) + 'px'} style={{fill: this.state.textColor}}>\n\t\t\t\t\t<textPath xlinkHref={\"#curve_\"+this.state.id} textAnchor=\"middle\" startOffset=\"25%\">\n\t\t\t\t\t\t{this.state.text}\n\t\t\t\t\t</textPath>\n\t\t\t\t</text>\n\t\t\t</svg>\n\t\t);\n\t}\n}\n\nexport default Event;\n","import React, { Component } from \"react\";\nimport Event from './Event.jsx'\n\nconst watchSize = 360;\nconst days = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"];\n\nconst logoSize = 90;\nconst eventWidth = 15;\nconst margin = 2;\nconst initialMargin = 5;\n// 2 + 12 + 2 + 2 + 12 + 2 + 2 + 12 + 2\n// --event----|---event2---|---event3---\nconst layerStart = (layer) => (eventWidth+2*margin)*layer + initialMargin;\n\nconst fontSize = {day: 10, status: 10};\n// if you change fontSize, you will need to add a constant term to the appropriate textRadius\n// I call it radius +C, and Leibniz did it first\nconst textRadius = {\n\tstatus: watchSize/2 - layerStart(6) + (eventWidth+2*margin - fontSize.status*1.4),\n\tday: watchSize/2 - layerStart(5) - fontSize.day*1.4/2 +2 // fuck it, +2px\n}\n\nconst refreshInterval = 5 * 1000; // in milliseconds\n\nclass WatchTimetable extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttimetable: this.props.timetable,\n\t\t\tbackground: this.props.background,\n\t\t\tday: this.props.day,\n\t\t\tcolorScheme: this.props.colorScheme,\n\n\t\t\tcurrentTime: new Date(),\n\t\t\tstatus: \"error\", // \"36 min of ARS left\", \"LINALG in 1h 17 min\", \"Done for today\"\n\n\t\t\tinterval: 0\n\t\t}\n\n\t\tthis.getEvents = this.getEvents.bind(this);\n\t\tthis.getNextEvent = this.getNextEvent.bind(this);\n\t\tthis.refresh = this.refresh.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tlet interval_id = setInterval(this.refresh, refreshInterval);\n\t\tthis.setState({interval: interval_id})\n\t\tthis.refresh();\n\t}\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.state.interval);\n\t}\n\n\trefresh() {\n\t\tlet currentTime = new Date();\n\n\t\tlet today = (currentTime.getDay() + 6) % 7;\n\t\tlet timeRotation = currentTime.getHours() * (watchSize/12) - 90;\n\t\ttimeRotation += currentTime.getMinutes() * ((watchSize/12)/60);\n\n\t\tlet status = \"\";\n\t\tlet upcoming = this.getNextEvent(currentTime);\n\t\tif (upcoming.type === \"none\") status = \"Done for today\";\n\t\tif (upcoming.type === \"start\") status = upcoming.abbr + \" in \"+upcoming.eta.str;\n\t\tif (upcoming.type === \"end\") status = upcoming.eta.str+\" of \"+upcoming.abbr+\" left\";\n\n\t\tthis.setState({ currentTime: currentTime, today: today, timeRotation: timeRotation, status: status });\n\t}\n\n\tgetEvents() {\n\t\tlet events = []\n\t\tfor (let i in this.state.timetable) {\n\t\t\tlet begin = {\n\t\t\t\tabbr: this.state.timetable[i].predmet.abbr,\n\t\t\t\ttime: this.state.timetable[i].ura,\n\t\t\t\tday: this.state.timetable[i].dan,\n\t\t\t\ttype: \"start\"\n\t\t\t}\n\t\t\tlet end = {\n\t\t\t\tabbr: this.state.timetable[i].predmet.abbr,\n\t\t\t\ttime: this.state.timetable[i].ura + this.state.timetable[i].trajanje,\n\t\t\t\tday: this.state.timetable[i].dan,\n\t\t\t\ttype: \"end\"\n\t\t\t}\n\t\t\tevents.push(begin);\n\t\t\tevents.push(end);\n\t\t}\n\t\treturn events;\n\t}\n\n\tgetNextEvent(current) {\n\t\tlet upcoming = [];\n\t\tlet events = this.getEvents();\n\t\tevents.forEach((event, i) => {\n\t\t\tif (event.day === ((current.getDay() + 6) % 7)) {\n\t\t\t\tlet eventTime = new Date(current.getTime());\n\t\t\t\teventTime.setHours(event.time);\n\t\t\t\teventTime.setMinutes(0);\n\t\t\t\t//if (event.type === \"start\") eventTime.setMinutes(15); // hmm\n\n\t\t\t\tlet diff = eventTime.getTime() - current.getTime();\n\t\t\t\tif (diff > 0) {\n\t\t\t\t\tevent.eta = {}\n\t\t\t\t\tevent.eta.ms = diff;\n\t\t\t\t\tevent.eta.str = \"\"\n\t\t\t\t\tlet min = Math.floor((diff/1000)/60);\n\t\t\t\t\tlet hour = Math.floor(min/60);\n\t\t\t\t\tmin %= 60;\n\t\t\t\t\tif (hour !== 0)\n\t\t\t\t\t\tevent.eta.str += hour+\" h \";\n\t\t\t\t\tif (min !== 0)\n\t\t\t\t\t\tevent.eta.str += min + \" min \";\n\t\t\t\t\tif (hour === 0 && min === 0)\n\t\t\t\t\t\tevent.eta.str = \"0\";\n\n\t\t\t\t\tevent.eta.str.slice(0, -1); // remove trailing space\n\t\t\t\t\tupcoming.push(event);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (upcoming.length === 0) return {type: \"none\"};\n\n\t\tupcoming.sort((a, b) => a.eta.ms - b.eta.ms);\n\t\treturn upcoming[0];\n\t}\n\n\trender() {\n\t\t// fucking react and their fucking state updates fuckery\n\t\tif (this.state.today === undefined) return <p>Loading...</p>;\n\n\t\treturn (\n\t\t\t// Circular viewport\n\t\t\t<div style={{\n\t\t\t\tbackgroundColor: this.state.colorScheme[\"background\"],\n\n\t\t\t\tborderRadius: \"50%\",\n\n\t\t\t\twidth: watchSize+'px',\n\t\t\t\theight: watchSize+'px'\n\t\t\t}}>\n\t\t\t\t{\n\t\t\t\t\t// cosmetic div: darker circles every even day\n\t\t\t\t\t[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((day) => {\n\t\t\t\t\t\treturn <div key={day} style={{\n\t\t\t\t\t\t\tbackgroundColor: (day % 2)?\n\t\t\t\t\t\t\t\tthis.state.colorScheme[\"background\"] :\n\t\t\t\t\t\t\t\tthis.state.colorScheme[\"background2\"],\n\t\t\t\t\t\t\tborderRadius: \"50%\",\n\t\t\t\t\t\t\twidth: (watchSize - 2*layerStart(day))+'px',\n\t\t\t\t\t\t\theight: (watchSize - 2*layerStart(day))+'px',\n\t\t\t\t\t\t\tposition: \"fixed\",\n\t\t\t\t\t\t\ttop: (layerStart(day)) + 'px',\n\t\t\t\t\t\t\tleft: (layerStart(day)) + 'px',\n\t\t\t\t\t\t}} />\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\t// lectures\n\t\t\t\t\tthis.state.timetable.map((lecture, i) => {\n\t\t\t\t\t\treturn <Event\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\tid={i}\n\t\t\t\t\t\t\tstart={lecture.ura}\n\t\t\t\t\t\t\tend={lecture.ura + lecture.trajanje}\n\t\t\t\t\t\t\tcolor={this.state.colorScheme[lecture.predmet.color]}\n\t\t\t\t\t\t\ttextColor={this.state.colorScheme[\"background\"]}\n\t\t\t\t\t\t\ttext={lecture.predmet.abbr}\n\t\t\t\t\t\t\tfontSize={ eventWidth -2 }\n\t\t\t\t\t\t\tsize={ eventWidth }\n\t\t\t\t\t\t\touterMargin={ layerStart(lecture.dan) }\n\t\t\t\t\t\t\tpadding={ margin }\n\t\t\t\t\t\t\tbackground={\n\t\t\t\t\t\t\t\tlecture.dan % 2?\n\t\t\t\t\t\t\t\tthis.state.colorScheme[\"background\"] :\n\t\t\t\t\t\t\t\tthis.state.colorScheme[\"background2\"]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdim={(lecture.dan === this.state.today)? false:true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\t{/* clock hand */}\n\t\t\t\t<div style={{\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\ttop: (watchSize/2) + 'px',\n\t\t\t\t\tleft: (watchSize/2) + 'px',\n\t\t\t\t\twidth: (watchSize/2) + 'px',\n\t\t\t\t\theight: \"3px\",\n\t\t\t\t\ttransform: \"rotate(\"+ this.state.timeRotation +\"deg)\",\n\t\t\t\t\ttransformOrigin: \"0 0\",\n\t\t\t\t\tbackgroundColor: this.state.colorScheme[\"hand\"]\n\t\t\t\t}} />\n\n\t\t\t\t{/* logo */}\n\t\t\t\t<img src=\"logo192.png\" alt=\"logo\" style={{\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\ttop: (watchSize/2 - logoSize/2) + 'px',\n\t\t\t\t\tleft: (watchSize/2 - logoSize/2) + 'px',\n\t\t\t\t\twidth: logoSize + 'px',\n\t\t\t\t\theight: logoSize + 'px'\n\t\t\t\t}} />\n\n\t\t\t\t{/* text trace svg */}\n\t\t\t\t<svg viewBox={\"0 0 \"+watchSize+\" \"+watchSize} style={{\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\ttop:\"0\",\n\t\t\t\t\tleft: \"0\",\n\t\t\t\t\twidth: watchSize+'px',\n\t\t\t\t\theight: watchSize+'px'\n\t\t\t\t}}>\n\t\t\t\t\t{/* text: current status */}\n\t\t\t\t\t<path id=\"curve_status\" fill=\"none\" d={\n\t\t\t\t\t\t\" M \"+watchSize/2+\" \"+watchSize/2\n\t\t\t\t\t+\t\" m -\"+(textRadius.status)+\", 0\"\n\t\t\t\t\t+\t\" a \"+(textRadius.status)+\",\"+(textRadius.status)+\" 0 1,1 \"+(textRadius.status*2)+\",0\"\n\t\t\t\t\t}/>\n\t\t\t\t\t<text y=\"0\" fontSize={(fontSize.status*1.4) + 'px'} style={{fill: this.state.colorScheme[\"text\"]}}>\n\t\t\t\t\t\t<textPath xlinkHref={\"#curve_status\"} textAnchor=\"middle\" startOffset=\"50%\">\n\t\t\t\t\t\t{this.state.status}\n\t\t\t\t\t\t</textPath>\n\t\t\t\t\t</text>\n\n\t\t\t\t\t{/* text: day of the week */}\n\t\t\t\t\t<path id=\"curve_day\" fill=\"none\" d={\n\t\t\t\t\t\t\" M \"+watchSize/2+\" \"+watchSize/2\n\t\t\t\t\t+\t\" m -\"+(textRadius.day)+\", 0\"\n\t\t\t\t\t+\t\" a \"+(textRadius.day)+\",\"+(textRadius.day)+\" 0 1,0 \"+(textRadius.day*2)+\",0\"\n\t\t\t\t\t}/>\n\t\t\t\t\t<text y=\"0\" fontSize={(fontSize.day*1.4) + 'px'} style={{fill: this.state.colorScheme[\"text\"]}}>\n\t\t\t\t\t\t<textPath xlinkHref={\"#curve_day\"} textAnchor=\"middle\" startOffset=\"50%\">\n\t\t\t\t\t\t\t{days[this.state.today]}\n\t\t\t\t\t\t</textPath>\n\t\t\t\t\t</text>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default WatchTimetable;\n","import React, { Component } from \"react\";\nimport './App.css';\nimport WatchTimetable from './components/WatchTimetable.jsx'\n\nconst colorScheme = {\n\tbackground: \"#222222\",\n\tbackground2: \"#2c2c2d\",\n\thand: \"red\", // clock hand colour\n\ttext: \"white\",\n\n\tred: \"#ff6188\",\n\torange: \"#fc9868\",\n\tyellow: \"#ffd866\",\n\tgreen: \"#a9de77\",\n\tblue: \"#78dce8\",\n\tpurple: \"#ab9df2\"\n}\n\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttimetable: false,\n\t\t\tapi_url: props.api_url || \"https://yon.si/urnik.php\",\n\t\t\terror: false\n\t\t}\n\n\t\tthis.fetchTableData = this.fetchTableData.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\t// can't call setState if component hasn't mounted yet\n\t\tthis.fetchTableData();\n\t}\n\n\tasync fetchTableData() {\n\t\tvar response = await fetch(\n\t\t\tthis.state.api_url,\n\t\t\t{\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t// 'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\n\n\t\tif (response.ok) {\n\t\t\tlet data = await response.json();\n\t\t\t//data = this.handleDuplicates(data);\n\t\t\tconsole.log(data)\n\t\t\tthis.setState({timetable: data});\n\t\t} else {\n\t\t\tconsole.error(response);\n\t\t\tthis.setState( { error: \"error fetching timetable: \" + response.status + \": \" + response.statusText } );\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\n\trender() {\n\t\tif (!this.state.timetable) return <p style={{textAlign: 'center'}}>Loading</p>;\n\t\treturn (\n\t\t\t<div className=\"App\">\n\t\t\t\t<WatchTimetable timetable={this.state.timetable} colorScheme={colorScheme} refreshTimetable={this.fetchTableData} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}